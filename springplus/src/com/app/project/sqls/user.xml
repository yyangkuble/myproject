<?xml version="1.0" encoding="UTF-8"?>
<sqls modeName="用户" xmlns="http://www.springmvcplus.com/schema/sql" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.springmvcplus.com/schema/sql sql.xsd">
	<sql id="checkTel" des="检查手机是否已经注册">
		select count(*) as telCount from user where tel = #{tel}
	</sql>
	<sql id="selectUserByTel">
		select a.*,b.groupName,b.rongCloudGroupId from user a left join group_ b on a.groupid=b.id where tel = #{tel}
	</sql>
	<!-- 验证登录 -->
	<sql id="login">
		select * from user where tel = #{tel} and password=#{password}
	</sql>
	<!-- 通过电话查询用户id -->
	<sql id="findUserById">
		select a.*,b.groupName,b.rongCloudGroupId from user a left join group_ b on a.groupid=b.id where a.id=#{id}
	</sql>
	<sql id="findUserByIdMessageUsed">
		select name,imgUrl from user where id=#{id}
	</sql>
	<sql id="UserCarPolicyLogByUserId">
		select a.*,b.name as customName from UserCarPolicyLog a join custom b on a.customid=b.id where a.userid=#{userId} order by id desc
	</sql>
	<!-- 
		通过客户id查询用户拜访记录
	 -->
	<sql id="findUserVisitLogByCustomId">
		select * from uservisitlog where customId= #{customId}
	</sql>
	<!-- 查询用户通知 -->
	<sql id="findUserNotifys">
		select * from NotifyMessage where isread=0 and userid=#{userId}
	</sql>
	<!-- 通过id查询用户日程 -->
	<sql id="findUserTripById">
		select * from userTrip where id = #{id}
	</sql>
</sqls>
